import{u as C,r,j as e}from"./vendor-HVpYYIdB.js";import{T as S}from"./Toast-D5AN34u6.js";import{u as w,a as $}from"./index-FO3MA470.js";import"./charts-USIkmnH5.js";const L="/assets/qcc-plus-logo-XS9dh-bX.png";function P(){const p=C(),{login:v}=w(),{version:s,loading:h,error:l}=$(),[t,j]=r.useState(""),[o,x]=r.useState(""),[c,i]=r.useState(""),[m,n]=r.useState(null),[u,d]=r.useState(!1),b=async a=>{if(a.preventDefault(),i(""),n(null),!t.trim()||!o.trim()){i("账号名称和密码不能为空");return}try{d(!0),await v(t.trim(),o.trim()),n({message:"登录成功，正在跳转...",type:"success"}),p("/admin/dashboard",{replace:!0})}catch(g){i(g.message||"登录失败"),n({message:g.message||"登录失败",type:"error"})}finally{d(!1)}},f=s?s.version.startsWith("v")?s.version:`v${s.version}`:h?"v...":"v-",N=s?.build_date_beijing||"--",y=s?`commit: ${s.git_commit}
build (BJ): ${N}
build (UTC): ${s.build_date||"--"}
go: ${s.go_version}`:l?`版本获取失败：${l.message}`:"正在加载版本信息...";return e.jsxs("div",{className:"login-page",children:[e.jsxs("div",{className:"login-container",children:[e.jsxs("div",{className:"login-header",children:[e.jsx("img",{src:L,alt:"QCC Plus Logo",className:"login-icon"}),e.jsxs("div",{className:"login-title",children:[e.jsx("h1",{children:"欢迎回来"}),e.jsx("p",{className:"sub",children:"登录 QCC Plus 管理后台"})]})]}),c&&e.jsx("div",{className:"error-message",children:c}),e.jsxs("form",{className:"login-form",onSubmit:b,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"账号名称"}),e.jsx("input",{className:"form-input",name:"username",value:t,onChange:a=>j(a.target.value),placeholder:"输入账号名称",autoComplete:"username",required:!0})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{className:"form-label",children:"密码"}),e.jsx("input",{className:"form-input",name:"password",type:"password",value:o,onChange:a=>x(a.target.value),placeholder:"输入密码",autoComplete:"current-password",required:!0})]}),e.jsx("button",{className:"btn-submit",type:"submit",disabled:u,children:u?"登录中...":"继续"})]}),e.jsx("div",{className:"login-footer",children:"登录后 24 小时内保持会话，记得使用退出按钮主动登出。"})]}),e.jsx("div",{className:"login-version",title:y,children:f}),e.jsx(S,{message:m?.message,type:m?.type})]})}export{P as default};
