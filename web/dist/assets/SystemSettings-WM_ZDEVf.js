import{r as u,j as e}from"./vendor-HVpYYIdB.js";import{C as h}from"./Card-Bmh2bB8_.js";import{e as j}from"./index-DHDrpoUu.js";import"./charts-USIkmnH5.js";const p=[{key:"monitor",label:"显示设置"},{key:"health",label:"监控设置"},{key:"performance",label:"性能设置"},{key:"notification",label:"通知设置"}];function f(){const{settings:c,loading:l,updateSetting:n,refresh:i}=j(),[a,d]=u.useState("monitor"),[r,t]=u.useState(null),o=async(s,g)=>{t(s);try{await n(s,g)}catch(x){alert(x?.message||"保存失败")}finally{t(null)}},m=Object.values(c).filter(s=>s.category===a);return e.jsxs("div",{className:"system-settings-page",children:[e.jsxs("div",{className:"system-settings-header",children:[e.jsx("h1",{children:"系统设置"}),e.jsx("p",{className:"sub",children:"配置系统参数，包括监控、健康检查、性能等设置。"})]}),e.jsx(h,{className:"settings-card tabs-card",children:e.jsxs("div",{className:"settings-toolbar",children:[e.jsx("div",{className:"tab-group",children:p.map(s=>e.jsx("button",{type:"button",className:`tab-btn ${a===s.key?"active":""}`,onClick:()=>d(s.key),children:s.label},s.key))}),e.jsx("div",{className:"spacer"}),e.jsx("button",{className:"btn ghost",type:"button",onClick:i,disabled:l,children:"刷新"})]})}),e.jsx(h,{className:"settings-card",children:e.jsx("div",{className:"settings-list",children:l?e.jsx("div",{className:"settings-loading",children:"加载中..."}):m.length===0?e.jsx("div",{className:"no-settings",children:"该分类暂无配置项"}):m.map(s=>e.jsxs("div",{className:`setting-item ${r===s.key?"saving":""}`,children:[e.jsxs("div",{className:"setting-info",children:[e.jsx("div",{className:"setting-key",children:s.key}),e.jsx("div",{className:"setting-desc",children:s.description||"-"})]}),e.jsx("div",{className:"setting-control",children:y(s,o,r===s.key)})]},s.key))})})]})}function y(c,l,n){const{key:i,value:a,data_type:d,is_secret:r}=c;if(r)return e.jsx("span",{className:"secret-mask",children:"******"});switch(d){case"boolean":return e.jsxs("label",{className:"toggle",children:[e.jsx("input",{type:"checkbox",checked:!!a,onChange:t=>l(i,t.target.checked),disabled:n}),e.jsx("span",{className:"slider"})]});case"number":return e.jsx("input",{type:"number",value:a??"",onChange:t=>l(i,parseFloat(t.target.value)),disabled:n});case"object":{const t=a===void 0?"":JSON.stringify(a,null,2);return e.jsx("textarea",{value:t,onChange:o=>{try{l(i,JSON.parse(o.target.value))}catch{}},disabled:n})}default:return e.jsx("input",{type:"text",value:a??"",onChange:t=>l(i,t.target.value),disabled:n})}}export{f as default};
